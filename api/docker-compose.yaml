version: '1'

services:
  postgres:
    container_name: avt_wallet_postgres_db

    image: postgres

    environment:
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=postgres
      - APP_DB_USER=admin
      - APP_DB_PASS=postgres
      - APP_DB_NAME=avt_wallet_db

    volumes: 
      - ./db:/docker-entrypoint-initdb.d/

    ports: 
      # local : inside_container
      - 5432:5432

    expose:
      - 5432

    networks: 
      - avt_wallet_api

    restart: always

  # To manage the data base
  pgadmin:
    container_name: avt_wallet_postgres_admin

    image: dpage/pgadmin4

    environment:
      PGADMIN_DEFAULT_EMAIL: "pgadmin4@pgadmin.org"
      PGADMIN_DEFAULT_PASSWORD: "admin"
      PGADMIN_CONFIG_SERVER_MODE: 'False'

    volumes:
       - pgadmin:/var/lib/pgadmin

    ports:
      - 5050:80

    networks:
      - avt_wallet_api
      
    restart: unless-stopped

networks:
  avt_wallet_api:
    driver: bridge

volumes:
  postgres:
  pgadmin: